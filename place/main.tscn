[gd_scene load_steps=12 format=4 uid="uid://dkr0hckfg0gr2"]

[ext_resource type="Script" path="res://scene/world.gd" id="1_gnqy5"]
[ext_resource type="PackedScene" uid="uid://fjmjaf0ynqn4" path="res://scene/character/player.tscn" id="1_kcmfw"]
[ext_resource type="Texture2D" uid="uid://cror62i6o4ltc" path="res://asset/world/tile.png" id="1_o2ws4"]
[ext_resource type="PackedScene" uid="uid://df0j5wnvq4v4f" path="res://scene/character/actor.tscn" id="2_m2nem"]
[ext_resource type="PackedScene" uid="uid://c0uw3x77ekrta" path="res://scene/battle/battle.tscn" id="5_pnqya"]
[ext_resource type="Resource" uid="uid://7uoeaxnis4w0" path="res://resource/character/actor/enemy.tres" id="5_s8fkc"]
[ext_resource type="Script" path="res://scene/trigger/gate.gd" id="7_t5tdt"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_lq6qo"]
vertices = PackedVector2Array(16, 0, 0, 8, -16, 0, 0, -8)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, -8, -16, 0, 0, 8, 16, 0)])
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_lxvra"]
texture = ExtResource("1_o2ws4")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/z_index = -1
0:0/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_lq6qo")

[sub_resource type="TileSet" id="TileSet_33rkm"]
tile_shape = 1
tile_size = Vector2i(32, 16)
navigation_layer_0/layers = 1
sources/0 = SubResource("TileSetAtlasSource_lxvra")

[sub_resource type="CircleShape2D" id="CircleShape2D_t3b55"]
radius = 4.0

[node name="Main" type="Node2D" node_paths=PackedStringArray("tilemap")]
y_sort_enabled = true
script = ExtResource("1_gnqy5")
tilemap = NodePath("Tiles")

[node name="Background" type="CanvasLayer" parent="."]
layer = -1

[node name="Color" type="ColorRect" parent="Background"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0.105882, 0.105882, 0.105882, 1)
metadata/_edit_lock_ = true

[node name="Button" type="Button" parent="Background"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -50.0
offset_top = 11.0
offset_right = -9.0
offset_bottom = 18.0
grow_horizontal = 0
text = "start battle"

[node name="Tiles" type="TileMapLayer" parent="."]
y_sort_enabled = true
tile_map_data = PackedByteArray("AAD/////AAAAAAAAAAD///7/AAAAAAAAAAAAAP7/AAAAAAAAAAAAAAAAAAAAAAAAAAD///3/AAAAAAAAAAAAAP//AAAAAAAAAAD//wEAAAAAAAAAAAD//wAAAAAAAAAAAAD+////AAAAAAAAAAD+//7/AAAAAAAAAAD+//3/AAAAAAAAAAD///z/AAAAAAAAAAD///v/AAAAAAAAAAAAAPz/AAAAAAAAAAAAAP3/AAAAAAAAAAABAP7/AAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAABAP//AAAAAAAAAAD//wMAAAAAAAAAAAD//wIAAAAAAAAAAAD+/wEAAAAAAAAAAAD+/wAAAAAAAAAAAAD9////AAAAAAAAAAABAPz/AAAAAAAAAAABAPv/AAAAAAAAAAABAPr/AAAAAAAAAAABAPn/AAAAAAAAAAACAPr/AAAAAAAAAAACAPz/AAAAAAAAAAACAPv/AAAAAAAAAAADAPr/AAAAAAAAAAACAPn/AAAAAAAAAAACAPj/AAAAAAAAAAABAPj/AAAAAAAAAAAAAPf/AAAAAAAAAAAAAPb/AAAAAAAAAAD///f/AAAAAAAAAAD///j/AAAAAAAAAAD///n/AAAAAAAAAAAAAPj/AAAAAAAAAAABAPb/AAAAAAAAAAAAAPX/AAAAAAAAAAAAAPT/AAAAAAAAAAD///X/AAAAAAAAAAD///b/AAAAAAAAAAD+//f/AAAAAAAAAAD+//b/AAAAAAAAAAD+//X/AAAAAAAAAAD///T/AAAAAAAAAAD///P/AAAAAAAAAAAAAPP/AAAAAAAAAAABAPT/AAAAAAAAAAABAPX/AAAAAAAAAAAAAPL/AAAAAAAAAAD///H/AAAAAAAAAAD///L/AAAAAAAAAAD+//P/AAAAAAAAAAD+//T/AAAAAAAAAAD9//X/AAAAAAAAAAD+//j/AAAAAAAAAAD9//n/AAAAAAAAAAD9//r/AAAAAAAAAAD8//n/AAAAAAAAAAD9//j/AAAAAAAAAAD9//v/AAAAAAAAAAD9//z/AAAAAAAAAAD8//v/AAAAAAAAAAD8//r/AAAAAAAAAAD+//r/AAAAAAAAAAD+//z/AAAAAAAAAAD+/wIAAAAAAAAAAAD9/wMAAAAAAAAAAAD9/wQAAAAAAAAAAAD8/wUAAAAAAAAAAAD8/wYAAAAAAAAAAAD7/wcAAAAAAAAAAAADAPj/AAAAAAAAAAADAPf/AAAAAAAAAAAEAPb/AAAAAAAAAAAEAPX/AAAAAAAAAAAFAPT/AAAAAAAAAAD7/wgAAAAAAAAAAAABAAIAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_33rkm")

[node name="Battle" parent="." node_paths=PackedStringArray("actors") instance=ExtResource("5_pnqya")]
actors = [NodePath("../Actor")]

[node name="FromTest" type="Area2D" parent="."]
position = Vector2(32, 16)
script = ExtResource("7_t5tdt")
scene = "test"
mode = 1

[node name="Shape" type="CollisionShape2D" parent="FromTest"]
position = Vector2(16, 8)
shape = SubResource("CircleShape2D_t3b55")

[node name="Player" parent="." instance=ExtResource("1_kcmfw")]

[node name="Actor" parent="." instance=ExtResource("2_m2nem")]
position = Vector2(0, -80)
data = ExtResource("5_s8fkc")

[connection signal="pressed" from="Background/Button" to="Background/Button" method="queue_free"]
[connection signal="pressed" from="Background/Button" to="Battle" method="start"]
